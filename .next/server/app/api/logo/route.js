"use strict";(()=>{var e={};e.id=273,e.ids=[273],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4500:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h});var n={};r.r(n),r.d(n,{POST:()=>g});var o=r(9303),i=r(8716),a=r(670);function s(e){let t=0;for(let r=0;r<e.length;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return Math.abs(t)}function l({name:e,sector:t,palette:r,font:n}){let o=`${e}|${t}`.trim(),[i,a,l]=r&&r.length>=3?r:function(e){let t=s(e),r=t%360;return[r,(r+40+t%80)%360,(r+200+t%50)%360].map(e=>`hsl(${e}deg 70% 55%)`)}(o),c=function(e){let t=s(e);return`<circle cx="50" cy="50" r="${40+t%20}" fill="url(#grad)" opacity="0.9" />
<circle cx="70" cy="40" r="${20+t%10}" fill="var(--accent)" opacity="0.75" />`}(o),p=e.split(/\s+/).slice(0,2).map(e=>e[0]?e[0].toUpperCase():"").join("");return`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 100 100" role="img" aria-label="${e} logo">
  <defs>
    <linearGradient id="grad" x1="0" x2="1" y1="0" y2="1">
      <stop offset="0%" stop-color="${i}"/>
      <stop offset="100%" stop-color="${a}"/>
    </linearGradient>
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="4" result="b"/>
      <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  <rect x="0" y="0" width="100" height="100" rx="18" fill="#050505"/>
  <g style="--accent:${l}" filter="url(#glow)">
    ${c}
    <text x="50" y="57" font-family="${n||"system-ui,Inter,sans-serif"}" font-size="36" font-weight="600" text-anchor="middle" fill="#fff" letter-spacing="1">${p}</text>
  </g>
</svg>`}let c=process.env.AI_MODEL||"gpt-4o-mini";async function p(e){let t=process.env.OPENAI_API_KEY;if(!t)return null;try{let r=function(e){let t=e.palette&&e.palette.length>=3?e.palette.join(", "):"creative vibrant triadic scheme";return`You are an expert brand logo designer. Generate ONLY a valid <svg> (no markdown) square 512x512, minimal, flat/modern, dark background #050505, gradients allowed, featuring brand initials for "${e.name}" (sector: ${e.sector}). Use a refined, balanced composition, center alignment. Color palette: ${t}. Font preference: ${e.font||"Inter or geometric sans"}. Avoid raster images. Return ONLY SVG.`}(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:c,messages:[{role:"system",content:"You output only raw SVG markup."},{role:"user",content:r}],temperature:.8,max_tokens:1800})});if(!n.ok)return console.error("AI response not ok",await n.text()),null;let o=await n.json(),i=o.choices?.[0]?.message?.content;if(!i)return null;let a=i.match(/<svg[\s\S]*<\/svg>/i);if(!a)return null;return a[0]}catch(e){return console.error("AI generate error",e),null}}let u="true"===process.env.ENABLE_GPT5_PREVIEW;async function f(e,t){let r=process.env.AI_API_URL,n=process.env.AI_API_KEY;if(!r||!n)return null;try{let o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({name:e,sector:t,mode:"logo_vector_v1"})});if(!o.ok)return null;let i=await o.json();if(i.svg&&"string"==typeof i.svg)return i.svg}catch(e){console.error("AI generation failed",e)}return null}async function g(e){let{name:t,sector:r="",variants:n=1,palette:o,font:i,aiMode:a}=await e.json();if(!t||"string"!=typeof t)return new Response(JSON.stringify({error:"Nom requis"}),{status:400});let s=null;if(u&&(s=await f(t.slice(0,60),r.slice(0,80))),n>1){if(a&&u){let e=await p({name:t.slice(0,60),sector:r.slice(0,80),palette:o,font:i});if(e)return new Response(JSON.stringify({variants:[e],provider:"ai"}),{headers:{"Content-Type":"application/json"}})}return new Response(JSON.stringify({variants:function(e,t,r){let n=[];for(let o=0;o<r;o++)n.push(l({name:`${e}`,sector:`${t}|v${o}`}));return n}(t.slice(0,60),(r||"").slice(0,80),Math.min(n,8)),provider:"local"}),{headers:{"Content-Type":"application/json"}})}return a&&u&&(s=await p({name:t.slice(0,60),sector:r.slice(0,80),palette:o,font:i})),s||(s=l({name:t.slice(0,60),sector:(r||"").slice(0,80),palette:o,font:i})),new Response(JSON.stringify({svg:s,provider:a&&u&&s?"ai":u&&s?"gpt5":"local"}),{headers:{"Content-Type":"application/json"}})}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/logo/route",pathname:"/api/logo",filename:"route",bundlePath:"app/api/logo/route"},resolvedPagePath:"/Users/simon/Projects/logomaker/src/app/api/logo/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:v}=d,y="/api/logo/route";function w(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(4500));module.exports=n})();